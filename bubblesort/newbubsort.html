<!DOCTYPE html>
<html>
<head>
  <title>Bubble Sort</title>
  <script>
    var numbers = [];
    var currentPass = 0;

    function initialize() {
      var input = document.getElementById('numbers').value;
      numbers = input.split(',').map(Number);
      currentPass = 0;
      displayCurrentPass();
    }

    function displayCurrentPass() {
      var output = document.getElementById('output');
      output.innerHTML = ''; // Clear previous output

      var passOutput = document.createElement('p');
      passOutput.innerText = 'Pass ' + (currentPass + 1) + ':';
      output.appendChild(passOutput);

      for (var j = 0; j < numbers.length - currentPass - 1; j++) {
        var comparison = document.createElement('span');
        comparison.innerText = numbers.join(', ') + ' - Comparing ' + numbers[j] + ' and ' + numbers[j + 1];

        if (numbers[j] > numbers[j + 1]) {
          var temp = numbers[j];
          numbers[j] = numbers[j + 1];
          numbers[j + 1] = temp;
          comparison.innerText += ' - ' + numbers[j + 1] + ' is lesser than ' + numbers[j] + ', swap';
        } else {
          comparison.innerText += ' - ' + numbers[j + 1] + ' is greater than or equal to ' + numbers[j] + ', retain';
        }

        output.appendChild(comparison);
        output.appendChild(document.createElement('br'));
      }

      var passResult = document.createElement('p');
      passResult.innerText = 'Pass ' + (currentPass + 1) + ' result: ' + numbers.join(', ');
      output.appendChild(passResult);
      output.appendChild(document.createElement('br'));

      if (currentPass === numbers.length - 2) {
        var finalResult = document.createElement('p');
        finalResult.innerText = 'Since no swaps were made during Pass ' + (numbers.length - 1) + ', the list is now sorted. The final sorted array is: ' + numbers.join(', ');
        output.appendChild(finalResult);
      }
    }

    function nextPass() {
      if (currentPass < numbers.length - 2) {
        currentPass++;
        displayCurrentPass();
      }
    }

    function previousPass() {
      if (currentPass > 0) {
        currentPass--;
        displayCurrentPass();
      }
    }
  </script>
</head>
<body>
  <h1>Bubble Sort</h1>
  <form>
    <label for="numbers">Enter numbers (comma-separated):</label>
    <input type="text" id="numbers" name="numbers">
    <button type="button" onclick="initialize()">Sort</button>
    <button type="button" onclick="previousPass()">Back</button>
    <button type="button" onclick="nextPass()">Next</button>
  </form>
  <div id="output"></div>
</body>
</html>
